---
layout: default
title: machine yearning
---

<!-- Prevent flash by applying theme immediately -->
<script>
  (function() {
    // Check for saved theme preference or use prefer-color-scheme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
    
    // Check for saved animation preference
    const animationEnabled = localStorage.getItem('animationEnabled');
    if (animationEnabled !== null) {
      document.documentElement.setAttribute('data-animation', animationEnabled === 'true' ? 'enabled' : 'disabled');
    } else {
      // Default to enabled
      document.documentElement.setAttribute('data-animation', 'enabled');
    }
  })();
</script>

<!-- Add Space Grotesk font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="chat-style.css">
<!-- Include the chat directory scanner -->
<script src="chats-directory.js"></script>

<div class="site-header">
  <a href="index.html" class="site-title">
    <h1>machine yearning</h1>
  </a>
  <div class="header-controls">
    <button id="animation-toggle" class="animation-toggle" aria-label="Toggle typing animation">
      <svg class="enabled-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <circle cx="5" cy="12" r="2" />
        <circle cx="12" cy="12" r="2" />
        <circle cx="19" cy="12" r="2" />
      </svg>
      <svg class="disabled-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M5 10h14v4H5z" />
      </svg>
    </button>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
      <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm-9 4.5H1v-3h2v3zm20 0h-2v-3h2v3zM12 1v2c0 .55-.45 1-1 1s-1-.45-1-1V1h2zm0 20v2h-2v-2c0-.55.45-1 1-1s1 .45 1 1zm7.4-15.4l-1.4 1.4c-.39.39-1.02.39-1.41 0-.39-.39-.39-1.02 0-1.41l1.4-1.4 1.41 1.41zM5.99 19.41l-1.4 1.4-1.41-1.41 1.4-1.4c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41z"/>
      </svg>
      <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
      </svg>
    </button>
  </div>
</div>

<div class="content"> 
  <div id="post-container">
    <div id="loading" class="loading-indicator">Scanning for conversations...</div>
    <!-- Content will be populated by JavaScript -->
  </div>
</div>

<script>
  // Theme toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const toggleButton = document.getElementById('theme-toggle');
    
    // Toggle theme on button click
    toggleButton.addEventListener('click', function() {
      const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });
    
    // Animation toggle functionality
    const animationToggle = document.getElementById('animation-toggle');
    
    // Set initial toggle state
    const animationState = document.documentElement.getAttribute('data-animation') || 'enabled';
    animationToggle.classList.add(animationState === 'enabled' ? 'enabled' : 'disabled');
    
    // Toggle animation on button click
    animationToggle.addEventListener('click', function() {
      const currentState = document.documentElement.getAttribute('data-animation') || 'enabled';
      const newState = currentState === 'enabled' ? 'disabled' : 'enabled';
      
      document.documentElement.setAttribute('data-animation', newState);
      localStorage.setItem('animationEnabled', newState === 'enabled');
      
      // Update toggle button class
      this.classList.remove('enabled', 'disabled');
      this.classList.add(newState);
    });
    
    // Load chats using the scanner
    const loadChats = async () => {
      const postContainer = document.getElementById('post-container');
      const loadingIndicator = document.getElementById('loading');
      
      try {
        // Initialize the chat scanner and get the dates
        const dates = await window.chatScanner.init();
        
        if (dates.length === 0) {
          loadingIndicator.textContent = 'No conversations found. Add markdown files to the _chats directory to get started.';
          return;
        }
        
        // Hide the loading indicator
        loadingIndicator.style.display = 'none';
        
        // Create HTML for each date
        dates.forEach(date => {
          if (date.files.length === 0) return; // Skip dates with no files
          
          const dateSection = document.createElement('div');
          dateSection.className = 'date-section';
          
          const dateHeader = document.createElement('h2');
          dateHeader.textContent = date.displayName;
          dateSection.appendChild(dateHeader);
          
          const postList = document.createElement('ul');
          postList.className = 'post-list';
          
          date.files.forEach(file => {
            const listItem = document.createElement('li');
            
            const link = document.createElement('a');
            link.href = `chat-viewer.html?path=${file.path}`;
            link.textContent = file.title;
            
            listItem.appendChild(link);
            postList.appendChild(listItem);
          });
          
          dateSection.appendChild(postList);
          postContainer.appendChild(dateSection);
        });
      } catch (error) {
        console.error('Error loading chats:', error);
        loadingIndicator.textContent = `Error loading conversations: ${error.message}`;
      }
    };
    
    // Start loading chats
    loadChats();
  });
</script>

<style>
  .loading-indicator {
    text-align: center;
    padding: 2rem;
    color: var(--muted-color);
    font-style: italic;
  }
  
  .header-controls {
    display: flex;
    align-items: center;
  }
</style> 